#!/app/vendor/node/bin/node

var mongoose = require('mongoose');
mongoose.connect(process.env.MONGO_URL);

var OAuthClientsModel = require('./../app/models/oauth_client')
  , MessageType = require('./../app/models/message_type');

OAuthClientsModel.create({
  clientId: 'lingua-ios',
  clientSecret: 'l1n9u4',
  redirectUri: '/oauth/redirect'
})
.then(
  function() {
    console.log('Inserted all clients');
    return MessageType.create(require('./../sample_data/message_types.json'));
  },
  function(err) {
    console.log(err);
    process.exit();
})
.then(
  function() {
    console.log('Inserted all message types');
    process.exit();
  },
  function(err) {
    console.log(err);
    process.exit();
});